<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OENO K√≥d Keres≈ë</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Outfit:wght@300;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Outfit', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
            color: #1e293b;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            max-width: 500px;
            width: 100%;
            text-align: center;
        }
        
        h1 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #dc2626, #f97316);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            font-size: 0.9rem;
            color: #64748b;
            margin-bottom: 30px;
        }
        
        .language-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
        }
        
        .lang-btn {
            padding: 10px 25px;
            border: 2px solid #dc2626;
            background: transparent;
            color: #dc2626;
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .lang-btn.active {
            background: #dc2626;
            color: #fff;
        }
        
        .lang-btn:hover {
            background: #dc2626;
            color: #fff;
            transform: scale(1.05);
        }
        
        .input-section {
            background: #fff;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
        }
        
        .input-row {
            display: flex;
            gap: 10px;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .code-input {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            width: 140px;
            padding: 15px;
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            text-align: center;
            color: #1e293b;
            background: #f8fafc;
            transition: all 0.3s ease;
        }
        
        .code-input:focus {
            outline: none;
            border-color: #dc2626;
            box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.1);
        }
        
        .code-input::placeholder {
            color: #cbd5e1;
        }
        
        .search-btn {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            border: none;
            background: linear-gradient(145deg, #dc2626, #f97316);
            color: #fff;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .search-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
        }
        
        .mic-btn {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
            background: #fff;
            color: #64748b;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .mic-btn:hover {
            border-color: #dc2626;
            color: #dc2626;
        }
        
        .mic-btn.listening {
            animation: pulse 1.5s infinite;
            background: linear-gradient(145deg, #0ea5e9, #06b6d4);
            border-color: transparent;
            color: #fff;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }
        
        .hint {
            font-size: 0.8rem;
            color: #94a3b8;
        }
        
        .status {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            margin: 15px 0;
            min-height: 25px;
            color: #64748b;
        }
        
        .status.listening {
            color: #0ea5e9;
        }
        
        .status.success {
            color: #16a34a;
        }
        
        .status.error {
            color: #dc2626;
        }
        
        .result-box {
            background: #fff;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .input-code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            color: #94a3b8;
            margin-bottom: 10px;
        }
        
        .output-code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(90deg, #16a34a, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .description {
            font-size: 0.9rem;
            color: #64748b;
            margin-top: 15px;
            line-height: 1.5;
        }
        
        .instructions {
            margin-top: 30px;
            padding: 15px 20px;
            background: #fff;
            border-radius: 15px;
            font-size: 0.85rem;
            color: #64748b;
            line-height: 1.6;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .instructions strong {
            color: #dc2626;
        }
        
        kbd {
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            padding: 2px 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>OENO K√≥d Keres≈ë</h1>
        <p class="subtitle">R√∂ntgen leletez√©si k√≥dok</p>
        
        <div class="language-toggle">
            <button class="lang-btn active" data-lang="hu" onclick="setLanguage('hu')">Magyar</button>
            <button class="lang-btn" data-lang="en" onclick="setLanguage('en')">English</button>
        </div>
        
        <div class="input-section">
            <div class="input-row">
                <input type="text" 
                       class="code-input" 
                       id="codeInput" 
                       maxlength="3" 
                       placeholder="000"
                       autocomplete="off"
                       inputmode="numeric">
                <button class="search-btn" id="searchBtn" onclick="searchCode()">‚Üí</button>
                <button class="mic-btn" id="micBtn" onclick="startListening()">üé§</button>
            </div>
            <p class="hint">√çrd be a 3 sz√°mjegyet + <kbd>Enter</kbd></p>
        </div>
        
        <div class="status" id="status">K√©szen √°ll</div>
        
        <div class="result-box">
            <div class="input-code" id="inputCode">31___</div>
            <div class="output-code" id="outputCode">‚Äî</div>
            <div class="description" id="description"></div>
        </div>
        
        <div class="instructions">
            <strong>Billenty≈±zet:</strong> √çrd be a 3 sz√°mjegyet ‚Üí <kbd>Enter</kbd><br>
            <strong>Hang (HU):</strong> "h√°rom nyolc kett≈ë"<br>
            <strong>Voice (EN):</strong> "three eight two"
        </div>
    </div>

    <script>
        // OENO k√≥d adatb√°zis
        const codeDatabase = {
            "010": { output: "085", desc: "Mandibula felv√©tel + leletez√©s" },
            "020": { output: "086", desc: "√Ållkapocs√≠z√ºleti felv√©tel+ leletez√©s" },
            "021": { output: "087", desc: "√Ållcs√∫cs felv√©tel+ leletez√©s" },
            "030": { output: "088", desc: "Radiographia dentalis extraoralis+ leletez√©s" },
            "040": { output: "089", desc: "Radiographia dentalis panoramica+ leletez√©s" },
            "050": { output: "090", desc: "Radiographia dentalis intraoralis, felv√©telenk√©nt+ leletez√©s" },
            "060": { output: "091", desc: "Teleradiographia dentalis+ leletez√©s" },
            "100": { output: "092", desc: "Koponyafelv√©tel, AP/PA+ leletez√©s" },
            "101": { output: "093", desc: "Koponyafelv√©tel, oldalir√°ny√∫+ leletez√©s" },
            "102": { output: "094", desc: "Koponyafelv√©tel, k√©tir√°ny√∫+ leletez√©s" },
            "103": { output: "095", desc: "Koponyafelv√©tel, Towne szerint+ leletez√©s" },
            "104": { output: "096", desc: "Koponyafelv√©tel, tangenci√°lis+ leletez√©s" },
            "110": { output: "097", desc: "Basis felv√©tel+ leletez√©s" },
            "130": { output: "098", desc: "Sella felv√©tel+ leletez√©s" },
            "140": { output: "099", desc: "Stenvers felv√©tel+ leletez√©s" },
            "141": { output: "100", desc: "Sch√ºller felv√©tel+ leletez√©s" },
            "142": { output: "101", desc: "Mayer felv√©tel+ leletez√©s" },
            "200": { output: "102", desc: "Orrmell√©k√ºreg felv√©tel+ leletez√©s" },
            "201": { output: "103", desc: "Rhese felv√©tel+ leletez√©s" },
            "210": { output: "104", desc: "Arcus zygomaticus felv√©tel+ leletez√©s" },
            "211": { output: "105", desc: "Orrcsont felv√©tel oldalir√°nyb√≥l+ leletez√©s" },
            "212": { output: "106", desc: "Arckoponya felv√©tel+ leletez√©s" },
            "230": { output: "107", desc: "Orbita felv√©tel+ leletez√©s" },
            "231": { output: "108", desc: "Orbita felv√©tel, sweet technik√°val+ leletez√©s" },
            "300": { output: "109", desc: "Trachea l√©gs√°v felv√©tel+ leletez√©s" },
            "310": { output: "110", desc: "Mellkasfelv√©tel, AP/PA+ leletez√©s" },
            "311": { output: "111", desc: "Mellkasfelv√©tel, oldalir√°ny√∫+ leletez√©s" },
            "312": { output: "112", desc: "Mellkasfelv√©tel, k√©tir√°ny√∫+ leletez√©s" },
            "380": { output: "113", desc: "Mellkasfelv√©tel, c√©lzott+ leletez√©s" },
            "381": { output: "114", desc: "Borda felv√©tel+ leletez√©s" },
            "382": { output: "115", desc: "Sternum felv√©tel+ leletez√©s" },
            "383": { output: "116", desc: "Sternum oldalir√°ny√∫ felv√©tel+ leletez√©s" },
            "384": { output: "117", desc: "Sternum kivet√≠tett felv√©tel+ leletez√©s" },
            "410": { output: "118", desc: "Epet√°ji nat√≠v felv√©tel+ leletez√©s" },
            "420": { output: "119", desc: "Vese √©s h√≥lyag nat√≠v felv√©tel+ leletez√©s" },
            "421": { output: "120", desc: "H√≥lyagt√°j nat√≠v felv√©tel+ leletez√©s" },
            "440": { output: "121", desc: "Has nat√≠v felv√©tel+ leletez√©s" },
            "441": { output: "122", desc: "Baby-gram+ leletez√©s" },
            "442": { output: "123", desc: "Wangensteen-Rice felv√©tel+ leletez√©s" },
            "460": { output: "124", desc: "Has c√©lzott felv√©tel+ leletez√©s" },
            "500": { output: "125", desc: "Dens felv√©tel+ leletez√©s" },
            "510": { output: "126", desc: "Nyaki gerinc, AP felv√©tel+ leletez√©s" },
            "511": { output: "127", desc: "Nyaki gerinc, oldalir√°ny√∫ felv√©tel+ leletez√©s" },
            "512": { output: "128", desc: "Nyaki gerinc, k√©tir√°ny√∫+ leletez√©s" },
            "513": { output: "129", desc: "Gerinc vizsg√°lat, funkcion√°lis+ leletez√©s" },
            "515": { output: "130", desc: "Nyaki-h√°ti gerinc √°tmenet, AP felv√©tel+ leletez√©s" },
            "516": { output: "131", desc: "Nyaki-h√°ti gerinc √°tmenet, oldalir√°ny√∫ felv√©tel+ leletez√©s" },
            "517": { output: "132", desc: "Nyaki-h√°ti gerinc √°tmenet, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "530": { output: "133", desc: "H√°ti gerinc, AP felv√©tel+ leletez√©s" },
            "531": { output: "134", desc: "H√°ti gerinc, oldalir√°ny√∫ felv√©tel+ leletez√©s" },
            "532": { output: "135", desc: "H√°ti gerinc, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "535": { output: "136", desc: "H√°ti-√°gy√©ki gerinc √°tmenet, AP felv√©tel+ leletez√©s" },
            "536": { output: "137", desc: "H√°ti-√°gy√©ki gerinc √°tmenet, oldalir√°ny√∫ felv√©tel+ leletez√©s" },
            "537": { output: "138", desc: "H√°ti-√°gy√©ki gerinc √°tmenet, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "540": { output: "139", desc: "Lumbalis gerinc, AP felv√©tel+ leletez√©s" },
            "541": { output: "140", desc: "Lumbalis gerinc, oldalir√°ny√∫ felv√©tel+ leletez√©s" },
            "542": { output: "141", desc: "Lumbalis gerinc, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "544": { output: "142", desc: "Lumbosacralis gerinc, AP felv√©tel+ leletez√©s" },
            "545": { output: "143", desc: "Lumbosacralis gerinc, oldalir√°ny√∫ felv√©tel+ leletez√©s" },
            "546": { output: "144", desc: "Lumbosacralis gerinc, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "548": { output: "145", desc: "Bending felv√©tel+ leletez√©s" },
            "550": { output: "146", desc: "Sacrum coccygeum, AP felv√©tel+ leletez√©s" },
            "551": { output: "147", desc: "Sacrum coccygeum, oldalir√°ny√∫ felv√©tel+ leletez√©s" },
            "552": { output: "148", desc: "Sacrum, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "560": { output: "149", desc: "Foramen vertebrarum felv√©tel+ leletez√©s" },
            "561": { output: "150", desc: "Dittmar felv√©tel+ leletez√©s" },
            "600": { output: "151", desc: "Clavicula felv√©tel+ leletez√©s" },
            "601": { output: "152", desc: "Sterno-clavicularis √≠z√ºleti felv√©tel+ leletez√©s" },
            "602": { output: "153", desc: "Acromio-clavicularis √≠z√ºleti felv√©tel+ leletez√©s" },
            "603": { output: "154", desc: "Scapula felv√©tel+ leletez√©s" },
            "604": { output: "155", desc: "V√°ll, AP felv√©tel+ leletez√©s" },
            "605": { output: "156", desc: "V√°llak √∂sszehasonl√≠t√≥ AP felv√©telei+ leletez√©s" },
            "606": { output: "157", desc: "V√°ll, axi√°lis felv√©tel+ leletez√©s" },
            "607": { output: "158", desc: "V√°ll, transthoracalis felv√©tel+ leletez√©s" },
            "608": { output: "159", desc: "V√°ll, terhel√©ses felv√©tel+ leletez√©s" },
            "650": { output: "160", desc: "Medence, AP felv√©tel+ leletez√©s" },
            "651": { output: "161", desc: "Cs√≠p≈ë√≠z√ºlet, AP felv√©tel+ leletez√©s" },
            "652": { output: "162", desc: "Cs√≠p≈ë√≠z√ºlet, oldalir√°ny√∫ felv√©tel+ leletez√©s" },
            "653": { output: "163", desc: "Cs√≠p≈ë√≠z√ºlet, Lauenstein felv√©tel+ leletez√©s" },
            "654": { output: "164", desc: "Obturator felv√©tel+ leletez√©s" },
            "655": { output: "165", desc: "Ala felv√©tel+ leletez√©s" },
            "656": { output: "166", desc: "Medence bemenet felv√©tel+ leletez√©s" },
            "657": { output: "167", desc: "Medence kimenet felv√©tel+ leletez√©s" },
            "660": { output: "168", desc: "Gerinc, teljes AP felv√©tel+ leletez√©s" },
            "661": { output: "169", desc: "Oldalir√°ny√∫ teljes gerincfelv√©tel+ leletez√©s" },
            "662": { output: "170", desc: "Risser-cs√≠k felv√©tel+ leletez√©s" },
            "710": { output: "171", desc: "Humerus, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "720": { output: "172", desc: "K√∂ny√∂k, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "725": { output: "173", desc: "√ñsszehasonl√≠t√≥ k√∂ny√∂k felv√©tel+ leletez√©s" },
            "730": { output: "174", desc: "Olecranon ulnae, axialis felv√©tel+ leletez√©s" },
            "731": { output: "175", desc: "Alkar, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "740": { output: "176", desc: "Csukl√≥, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "741": { output: "177", desc: "Csukl√≥, tartott felv√©tel+ leletez√©s" },
            "742": { output: "178", desc: "Csukl√≥-k√©z felv√©tel+ leletez√©s" },
            "750": { output: "179", desc: "Os naviculare, n√©gyir√°ny√∫ felv√©tel+ leletez√©s" },
            "751": { output: "180", desc: "Os naviculare felv√©tel+ leletez√©s" },
            "755": { output: "181", desc: "√ñsszehasonl√≠t√≥ k√©z felv√©tel AP ir√°nyban+ leletez√©s" },
            "760": { output: "182", desc: "K√©z, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "761": { output: "183", desc: "K√©z I. ujj, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "762": { output: "184", desc: "K√©zujjak k√©tir√°ny√∫ felv√©tele+ leletez√©s" },
            "763": { output: "185", desc: "Ujj, tartott felv√©tel+ leletez√©s" },
            "800": { output: "186", desc: "Teljes als√≥v√©gtagi r√∂ntgenfelv√©tel (AP)+ leletez√©s" },
            "810": { output: "187", desc: "Femur, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "819": { output: "188", desc: "√ñsszehasonl√≠t√≥ t√©rdfelv√©tel (AP)+ leletez√©s" },
            "820": { output: "189", desc: "T√©rd, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "821": { output: "190", desc: "T√©rd, tartott felv√©tel+ leletez√©s" },
            "822": { output: "191", desc: "Patella, axi√°lis felv√©tel+ leletez√©s" },
            "823": { output: "192", desc: "Alag√∫t betekint≈ë felv√©tel+ leletez√©s" },
            "830": { output: "193", desc: "L√°bsz√°r, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "840": { output: "194", desc: "Boka, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "841": { output: "195", desc: "Boka, tartott felv√©tel+ leletez√©s" },
            "842": { output: "196", desc: "Boka, h√°romir√°ny√∫ felv√©tel+ leletez√©s" },
            "850": { output: "197", desc: "Sarokcsont, oldalir√°ny√∫ felv√©tel+ leletez√©s" },
            "851": { output: "198", desc: "Sarokcsont, axialis felv√©tel+ leletez√©s" },
            "852": { output: "199", desc: "Talocalcanealis betekint≈ë felv√©tel+ leletez√©s" },
            "860": { output: "200", desc: "L√°b, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "861": { output: "201", desc: "L√°b I. ujj, k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "862": { output: "202", desc: "L√°b egy√©b ujjair√≥l k√©tir√°ny√∫ felv√©tel+ leletez√©s" },
            "863": { output: "203", desc: "L√°b √∂sszehasonl√≠t√≥ felv√©tel AP vagy ferde ir√°nyban+ leletez√©s" }
        };

        // Sz√°m szavak magyarul √©s angolul
        const numberWords = {
            hu: {
                "nulla": "0", "egy": "1", "kett≈ë": "2", "h√°rom": "3", "n√©gy": "4",
                "√∂t": "5", "hat": "6", "h√©t": "7", "nyolc": "8", "kilenc": "9"
            },
            en: {
                "zero": "0", "one": "1", "two": "2", "three": "3", "four": "4",
                "five": "5", "six": "6", "seven": "7", "eight": "8", "nine": "9",
                "oh": "0", "to": "2", "too": "2", "for": "4"
            }
        };

        let currentLang = 'hu';
        let recognition = null;

        const codeInput = document.getElementById('codeInput');
        const status = document.getElementById('status');

        // Oldal bet√∂lt√©sekor f√≥kusz az inputra
        window.onload = () => codeInput.focus();

        // Nyelv be√°ll√≠t√°sa
        function setLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            updateStatus(lang === 'hu' ? 'K√©szen √°ll' : 'Ready');
        }

        function updateStatus(text, type = '') {
            status.textContent = text;
            status.className = 'status' + (type ? ' ' + type : '');
        }

        // Sz√∂vegb≈ël sz√°mok kinyer√©se
        function parseSpokenNumbers(text) {
            text = text.toLowerCase().trim();
            let result = '';
            
            const directDigits = text.replace(/[^0-9]/g, '');
            if (directDigits.length >= 3) {
                return directDigits.slice(-3);
            }
            
            const words = text.split(/[\s,.-]+/);
            for (const word of words) {
                if (/^\d$/.test(word)) {
                    result += word;
                } else if (numberWords[currentLang][word]) {
                    result += numberWords[currentLang][word];
                } else {
                    const otherLang = currentLang === 'hu' ? 'en' : 'hu';
                    if (numberWords[otherLang][word]) {
                        result += numberWords[otherLang][word];
                    }
                }
            }
            
            return result.slice(-3).padStart(3, '0');
        }

        // Sz√°mok felolvas√°sa
        function speakNumbers(code) {
            const digits = code.split('');
            
            const digitWords = currentLang === 'hu'
                ? ['nulla', 'egy', 'kett≈ë', 'h√°rom', 'n√©gy', '√∂t', 'hat', 'h√©t', 'nyolc', 'kilenc']
                : ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];
            
            const text = digits.map(d => digitWords[parseInt(d)]).join(', ');
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = currentLang === 'hu' ? 'hu-HU' : 'en-US';
            utterance.rate = 0.85;
            
            utterance.onend = () => {
                setTimeout(() => {
                    updateStatus(currentLang === 'hu' ? 'K√©szen √°ll' : 'Ready');
                    codeInput.value = '';
                    codeInput.focus();
                }, 300);
            };
            
            speechSynthesis.speak(utterance);
        }

        // Keres√©s √©s eredm√©ny
        function lookupCode(inputCode) {
            const data = codeDatabase[inputCode];
            
            document.getElementById('inputCode').textContent = `31${inputCode}`;
            
            if (data) {
                document.getElementById('outputCode').textContent = data.output;
                document.getElementById('description').textContent = data.desc;
                updateStatus(currentLang === 'hu' ? 'Tal√°lat!' : 'Found!', 'success');
                speakNumbers(data.output);
            } else {
                document.getElementById('outputCode').textContent = '‚Äî';
                document.getElementById('description').textContent = '';
                updateStatus(currentLang === 'hu' ? 'Nem tal√°lhat√≥' : 'Not found', 'error');
                
                setTimeout(() => {
                    updateStatus(currentLang === 'hu' ? 'K√©szen √°ll' : 'Ready');
                    codeInput.value = '';
                    codeInput.focus();
                }, 1500);
            }
        }

        // Billenty≈±zetes keres√©s
        function searchCode() {
            const code = codeInput.value.trim().padStart(3, '0');
            if (code.length >= 1) {
                lookupCode(code);
            }
        }

        // Enter billenty≈± kezel√©se
        codeInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                searchCode();
            }
        });

        // Csak sz√°mok enged√©lyez√©se
        codeInput.addEventListener('input', (e) => {
            e.target.value = e.target.value.replace(/[^0-9]/g, '');
        });

        // Hangfelismer√©s
        function startListening() {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                alert(currentLang === 'hu' 
                    ? 'A b√∂ng√©sz≈ë nem t√°mogatja a hangfelismer√©st.' 
                    : 'Browser does not support speech recognition.');
                return;
            }

            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.lang = currentLang === 'hu' ? 'hu-HU' : 'en-US';
            recognition.continuous = false;
            recognition.interimResults = false;

            const micBtn = document.getElementById('micBtn');

            recognition.onstart = () => {
                micBtn.classList.add('listening');
                updateStatus(currentLang === 'hu' ? 'Figyelek...' : 'Listening...', 'listening');
            };

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                const code = parseSpokenNumbers(transcript);
                
                if (code && code.length === 3) {
                    codeInput.value = code;
                    lookupCode(code);
                } else {
                    updateStatus(currentLang === 'hu' 
                        ? 'Nem √©rtettem. Pr√≥b√°ld √∫jra!' 
                        : 'Did not understand. Try again!', 'error');
                }
            };

            recognition.onerror = () => {
                updateStatus(currentLang === 'hu' 
                    ? 'Hiba t√∂rt√©nt.' 
                    : 'Error occurred.', 'error');
            };

            recognition.onend = () => {
                micBtn.classList.remove('listening');
            };

            recognition.start();
        }
    </script>
</body>
</html>
